{"remainingRequest":"/home/Trabalho-Individual-2020-1/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/Trabalho-Individual-2020-1/client/src/components/DialogForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/Trabalho-Individual-2020-1/client/src/components/DialogForm.vue","mtime":1607820581600},{"path":"/home/Trabalho-Individual-2020-1/client/node_modules/cache-loader/dist/cjs.js","mtime":1606776316386},{"path":"/home/Trabalho-Individual-2020-1/client/node_modules/babel-loader/lib/index.js","mtime":1606776316365},{"path":"/home/Trabalho-Individual-2020-1/client/node_modules/vuetify-loader/lib/loader.js","mtime":1606776328537},{"path":"/home/Trabalho-Individual-2020-1/client/node_modules/cache-loader/dist/cjs.js","mtime":1606776316386},{"path":"/home/Trabalho-Individual-2020-1/client/node_modules/vue-loader/lib/index.js","mtime":1606776323398}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGYWN0b3J5IGZyb20gJ0AvYXBpL2ZhY3RvcnknCgpjb25zdCBQcm9maWxlQVBJID0gRmFjdG9yeS5nZXRBcGkoJ3Byb2ZpbGVzJykKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGlhbG9nRm9ybScsCgogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogJycsCiAgICAgIHVybDogJycsCiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBlcnJvcnM6IFtdCiAgICB9CiAgfSwKCiAgcHJvcHM6IHsKICAgIHJlZnJlc2g6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogKCkgPT4gZmFsc2UKICAgIH0sCiAgICBwcm9maWxlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBhc3luYyBlZGl0UHJvZmlsZSAoKSB7CiAgICAgIGNvbnN0IHByb2ZpbGVEYXRhID0gewogICAgICAgIG5hbWU6ICF0aGlzLnJlZnJlc2ggPyB0aGlzLm5hbWUgOiB0aGlzLnByb2ZpbGUubmFtZSwKICAgICAgICB1cmw6ICF0aGlzLnJlZnJlc2ggPyB0aGlzLnVybCA6IHRoaXMucHJvZmlsZS51cmwKICAgICAgfQoKICAgICAgYXdhaXQgUHJvZmlsZUFQSS51cGRhdGVQcm9maWxlKHRoaXMucHJvZmlsZS5pZCwgcHJvZmlsZURhdGEpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5uYW1lID0gcmVzLmRhdGEubmFtZQogICAgICAgICAgdGhpcy51cmwgPSByZXMuZGF0YS51cmwKCiAgICAgICAgICBjb25zdCB1cGRhdGVkUHJvZmlsZSA9IHJlcy5kYXRhCiAgICAgICAgICAvLyBwYXNzIHVwZGF0ZWQgcHJvZmlsZSBpbmZvIHRvIHBhcmVudAogICAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlZEV2ZW50JywgdXBkYXRlZFByb2ZpbGUpCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goZXJyKQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICB9KQogICAgfSwKCiAgICB1cGRhdGUgKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgIHRoaXMuZWRpdFByb2ZpbGUoKQogICAgfSwKCiAgICBzaG93TW9kYWwgKCkgewogICAgICB0aGlzLmRpYWxvZyA9IHRydWUKICAgIH0sCgogICAgY2xvc2VNb2RhbCAoKSB7CiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2UKICAgIH0KICB9LAoKICBiZWZvcmVNb3VudCAoKSB7CiAgICB0aGlzLm5hbWUgPSB0aGlzLnByb2ZpbGUubmFtZQogICAgdGhpcy51cmwgPSB0aGlzLnByb2ZpbGUudXJsCiAgfQp9Cg=="},{"version":3,"sources":["DialogForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"DialogForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <v-btn\n      v-if=\"refresh\"\n      id=\"dialog-form-refresh\"\n      icon\n      dense\n      color=\"blue-grey\"\n      :loading=\"loading\"\n      @click=\"update\"\n    >\n      <v-icon small>fas fa-sync</v-icon>\n    </v-btn>\n\n    <v-btn\n      v-else\n      id=\"dialog-form-open\"\n      icon\n      dense\n      color=\"blue-grey\"\n      @click.stop=\"showModal\"\n    >\n      <v-icon small>fas fa-edit</v-icon>\n    </v-btn>\n\n    <v-dialog v-model=\"dialog\" max-width=\"600px\">\n      <v-card>\n        <v-card-title>\n          <span class=\"headline\">\n            Edit profile\n          </span>\n        </v-card-title>\n\n        <v-card-text>\n          <v-container>\n            <div\n              v-if=\"errors.length > 0\"\n            >\n              <v-alert\n                v-for=\"err in errors\"\n                :key=\"err.id\"\n                dense\n                dismissible\n                type=\"error\"\n              >\n                {{ err }}\n              </v-alert>\n            </div>\n\n            <v-form\n              lazy-validation\n              @submit=\"update\"\n            >\n              <v-row>\n                <v-col cols=\"12\">\n                  <v-text-field\n                    dense\n                    outlined\n                    required\n                    label=\"Name\"\n                    hint=\"Leave unchanged to keep the previous value\"\n                    :placeholder=\"name\"\n                    v-model=\"name\"\n                  />\n                </v-col>\n                <v-col cols=\"12\">\n                  <v-text-field\n                    dense\n                    outlined\n                    required\n                    label=\"Github URL\"\n                    hint=\"Leave unchanged to keep the previous value\"\n                    :placeholder=\"url\"\n                    v-model=\"url\"\n                  />\n                </v-col>\n              </v-row>\n            </v-form>\n\n          </v-container>\n        </v-card-text>\n        <v-card-actions class=\"pb-6 px-6\">\n          <v-spacer></v-spacer>\n          <v-btn\n            id=\"dialog-form-close\"\n            text\n            color=\"blue-grey\"\n            @click=\"closeModal\"\n          >\n            Close\n          </v-btn>\n          <v-btn\n            id=\"dialog-form-update\"\n            depressed\n            dark\n            color=\"blue-grey\"\n            :loading=\"loading\"\n            @click=\"update\"\n          >\n            <v-icon small left>fas fa-save</v-icon> Save\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport Factory from '@/api/factory'\n\nconst ProfileAPI = Factory.getApi('profiles')\n\nexport default {\n  name: 'DialogForm',\n\n  data () {\n    return {\n      name: '',\n      url: '',\n      dialog: false,\n      loading: false,\n      errors: []\n    }\n  },\n\n  props: {\n    refresh: {\n      type: Boolean,\n      default: () => false\n    },\n    profile: {\n      type: Object,\n      required: true\n    }\n  },\n\n  methods: {\n    async editProfile () {\n      const profileData = {\n        name: !this.refresh ? this.name : this.profile.name,\n        url: !this.refresh ? this.url : this.profile.url\n      }\n\n      await ProfileAPI.updateProfile(this.profile.id, profileData)\n        .then((res) => {\n          this.name = res.data.name\n          this.url = res.data.url\n\n          const updatedProfile = res.data\n          // pass updated profile info to parent\n          this.$emit('updatedEvent', updatedProfile)\n          this.loading = false\n          this.dialog = false\n        })\n        .catch((err) => {\n          this.errors.push(err)\n          this.loading = false\n        })\n    },\n\n    update () {\n      this.loading = true\n      this.editProfile()\n    },\n\n    showModal () {\n      this.dialog = true\n    },\n\n    closeModal () {\n      this.dialog = false\n    }\n  },\n\n  beforeMount () {\n    this.name = this.profile.name\n    this.url = this.profile.url\n  }\n}\n</script>\n"]}]}